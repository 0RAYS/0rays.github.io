"use strict";(self.webpackChunkcbctf_docs=self.webpackChunkcbctf_docs||[]).push([[6685],{1911:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>c});var r=l(9729);const d={},i=r.createContext(d);function s(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),r.createElement(i.Provider,{value:n},e.children)}},2808:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"depoly/settings","title":"config.yml","description":"\u4e3a CBCTF \u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\uff0c\u4f4d\u4e8e\u7a0b\u5e8f\u6839\u76ee\u5f55\u4e0b config.yml\uff0c\u4f7f\u7528 YAML \u683c\u5f0f\u7f16\u5199","source":"@site/docs/depoly/settings.md","sourceDirName":"depoly","slug":"/depoly/settings","permalink":"/cbctf/docs/depoly/settings","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/depoly/settings.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"guideSidebar","previous":{"title":"\u96c6\u7fa4\u90e8\u7f72","permalink":"/cbctf/docs/depoly/"}}');var d=l(5813),i=l(1911);const s={sidebar_position:2},c="config.yml",h={},o=[{value:"\u9ed8\u8ba4\u914d\u7f6e",id:"\u9ed8\u8ba4\u914d\u7f6e",level:2},{value:"\u5b57\u6bb5\u8bf4\u660e",id:"\u5b57\u6bb5\u8bf4\u660e",level:2},{value:"backend",id:"backend",level:3},{value:"frontend",id:"frontend",level:3},{value:"path",id:"path",level:3},{value:"log",id:"log",level:3},{value:"level",id:"level",level:4},{value:"save",id:"save",level:4},{value:"asynq",id:"asynq",level:3},{value:"level",id:"level-1",level:4},{value:"concurrency",id:"concurrency",level:4},{value:"gin",id:"gin",level:3},{value:"mode",id:"mode",level:4},{value:"host",id:"host",level:4},{value:"port",id:"port",level:4},{value:"proxies",id:"proxies",level:4},{value:"upload",id:"upload",level:4},{value:"max",id:"max",level:5},{value:"rate",id:"rate",level:4},{value:"global",id:"global",level:5},{value:"whitelist",id:"whitelist",level:5},{value:"log",id:"log-1",level:4},{value:"whitelist",id:"whitelist-1",level:5},{value:"gorm",id:"gorm",level:3},{value:"mysql",id:"mysql",level:4},{value:"host",id:"host-1",level:5},{value:"port",id:"port-1",level:5},{value:"user",id:"user",level:5},{value:"pwd",id:"pwd",level:5},{value:"db",id:"db",level:5},{value:"mxopen",id:"mxopen",level:5},{value:"mxidle",id:"mxidle",level:5},{value:"log",id:"log-2",level:4},{value:"level",id:"level-2",level:4},{value:"redis",id:"redis",level:3},{value:"host",id:"host-2",level:4},{value:"port",id:"port-2",level:4},{value:"pwd",id:"pwd-1",level:4},{value:"k8s",id:"k8s",level:3},{value:"config",id:"config",level:4},{value:"namespace",id:"namespace",level:4},{value:"tcpdump",id:"tcpdump",level:4},{value:"external_network",id:"external_network",level:4},{value:"cidr",id:"cidr",level:5},{value:"gateway",id:"gateway",level:5},{value:"interface",id:"interface",level:5},{value:"exclude_ips",id:"exclude_ips",level:5},{value:"frpc",id:"frpc",level:4},{value:"on",id:"on",level:5},{value:"frpc_image",id:"frpc_image",level:5},{value:"nginx_image",id:"nginx_image",level:5},{value:"frps",id:"frps",level:5},{value:"host",id:"host-3",level:6},{value:"port",id:"port-3",level:6},{value:"token",id:"token",level:6},{value:"allowed_ports",id:"allowed_ports",level:6},{value:"generator_worker",id:"generator_worker",level:4},{value:"nfs",id:"nfs",level:3},{value:"server",id:"server",level:4},{value:"path",id:"path-1",level:4},{value:"storage",id:"storage",level:4}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"configyml",children:"config.yml"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4e3a CBCTF \u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\uff0c\u4f4d\u4e8e\u7a0b\u5e8f\u6839\u76ee\u5f55\u4e0b ",(0,d.jsx)(n.code,{children:"config.yml"}),"\uff0c\u4f7f\u7528 YAML \u683c\u5f0f\u7f16\u5199"]}),"\n",(0,d.jsx)(n.h2,{id:"\u9ed8\u8ba4\u914d\u7f6e",children:"\u9ed8\u8ba4\u914d\u7f6e"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"backend: http://127.0.0.1:8000\r\n# CORS\r\nfrontend: http://127.0.0.1:3000\r\n# Data path and NFS mount path if needed\r\npath: ./data\r\nlog:\r\n  # DEBUG INFO WARNING ERROR\r\n  level: info\r\n  save: true\r\nasynq:\r\n  # DEBUG INFO WARNING ERROR\r\n  level: warning\r\n  # Concurrent workers\r\n  concurrency: 50\r\ngin:\r\n  mode: release\r\n  host: 127.0.0.1\r\n  port: 8000\r\n  # Trusted proxy servers\r\n  proxies:\r\n    - 10.0.0.1\r\n  upload:\r\n    # Size limited\r\n    max: 8\r\n  rate:\r\n    # Global rate limit\r\n    global: 100\r\n    # Request without rate limited\r\n    whitelist:\r\n      - ::1\r\n      - 127.0.0.1\r\n  log:\r\n    # Request without logging\r\n    whitelist:\r\n      - /metrics\r\ngorm:\r\n  mysql:\r\n    host: 127.0.0.1\r\n    port: 3306\r\n    user: cbctf\r\n    pwd: password\r\n    db: cbctf\r\n    mxopen: 100\r\n    mxidle: 10\r\n  log:\r\n    # INFO WARNING ERROR SILENT\r\n    level: silent\r\nredis:\r\n  host: 127.0.0.1\r\n  port: 6379\r\n  pwd: password\r\nk8s:\r\n  # Kubeconfig path\r\n  config: ./admin.conf\r\n  # Also as prefix of resources\r\n  namespace: cbctf\r\n  # Maybe your k8s nodes cidr\r\n  # https://kubeovn.github.io/docs/stable/vpc/vpc/#_2\r\n  external_network:\r\n    cidr: 192.168.0.0/16\r\n    gateway: 192.168.0.1\r\n    interface: eth0\r\n    exclude_ips:\r\n      - 192.168.0.1\r\n      - 192.168.0.254\r\n  # Docker image\r\n  tcpdump: nicolaka/netshoot:latest\r\n  frpc:\r\n    on: false\r\n    # Docker image\r\n    frpc_image: snowdreamtech/frpc:latest\r\n    nginx_image: nginx:latest\r\n    frps:\r\n      - host: example.com\r\n        port: 7000\r\n        token: token\r\n        allowed_ports:\r\n          - from: 10000\r\n            to: 30000\r\n            exclude:\r\n              - 20000\r\n          - from: 40000\r\n            to: 60000\r\n            exclude:\r\n              - 50000\r\n  # (len(nodes) * generator_worker) pods for each dynamic challenge\r\n  generator_worker: 2\r\nnfs:\r\n  server: 127.0.0.1\r\n  # Accessible path (RW) in NFS server\r\n  path: /mnt/data\r\n  # Gi, Mi\r\n  storage: 10Gi\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u5b57\u6bb5\u8bf4\u660e",children:"\u5b57\u6bb5\u8bf4\u660e"}),"\n",(0,d.jsx)(n.h3,{id:"backend",children:"backend"}),"\n",(0,d.jsxs)(n.p,{children:["\u540e\u7aef\u670d\u52a1\u5730\u5740\uff0c\u4f5c\u4e3a\u5916\u90e8\u8bbf\u95ee\u5730\u5740\uff0c\u4e5f\u662f ",(0,d.jsx)(n.code,{children:"Oauth"})," \u91cd\u5b9a\u5411\u5730\u5740\u3002\u4f8b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"https://training.0rays.club\n"})}),"\n",(0,d.jsx)(n.h3,{id:"frontend",children:"frontend"}),"\n",(0,d.jsxs)(n.p,{children:["\u524d\u7aef\u670d\u52a1\u5730\u5740\uff0c\u4f5c\u4e3a\u5916\u90e8\u8bbf\u95ee\u5730\u5740\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u4e0e ",(0,d.jsx)(n.code,{children:"backend"})," \u5b57\u6bb5\u76f8\u540c\uff0c\u4ec5\u5f53\u524d\u540e\u7aef\u5206\u79bb\u90e8\u7f72\u65f6\u4e0d\u540c\uff1b\u540c\u65f6\u4f5c\u4e3a CORS \u8bbf\u95ee\u7b56\u7565\u3002\u4f8b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"https://training.0rays.club\n"})}),"\n",(0,d.jsx)(n.h3,{id:"path",children:"path"}),"\n",(0,d.jsxs)(n.p,{children:["\u6570\u636e\u5b58\u50a8\u8def\u5f84\uff0c\u4f5c\u4e3a\u7a0b\u5e8f\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff0c\u540c\u65f6\u4f5c\u4e3a ",(0,d.jsx)(n.code,{children:"NFS"})," \u6302\u8f7d\u8def\u5f84\uff0c\u7a0b\u5e8f\u9700\u8981\u6709\u5bf9\u5176\u7684\u5b8c\u5168\u8bbf\u95ee\u63a7\u5236\u6743\u9650\u3002\u4f8b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"./data\n"})}),"\n",(0,d.jsx)(n.h3,{id:"log",children:"log"}),"\n",(0,d.jsx)(n.p,{children:"\u5168\u5c40\u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"level",children:"level"}),"\n",(0,d.jsxs)(n.p,{children:["\u7ec8\u7aef\u65e5\u5fd7\u7b49\u7ea7\uff0c\u652f\u6301 ",(0,d.jsx)(n.code,{children:"DEBUG"})," ",(0,d.jsx)(n.code,{children:"INFO"})," ",(0,d.jsx)(n.code,{children:"WARNING"})," ",(0,d.jsx)(n.code,{children:"ERROR"})," \u56db\u79cd\u7b49\u7ea7\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"INFO"})]}),"\n",(0,d.jsx)(n.h4,{id:"save",children:"save"}),"\n",(0,d.jsxs)(n.p,{children:["\u662f\u5426\u4fdd\u5b58\u65e5\u5fd7\u81f3\u6587\u4ef6\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"true"}),"\uff0c\u65e5\u5fd7\u6587\u4ef6\u4f4d\u4e8e ",(0,d.jsx)(n.code,{children:"./logs"})," \u76ee\u5f55\u4e0b"]}),"\n",(0,d.jsx)(n.h3,{id:"asynq",children:"asynq"}),"\n",(0,d.jsx)(n.p,{children:"\u5f02\u6b65\u4efb\u52a1\u961f\u5217\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"level-1",children:"level"}),"\n",(0,d.jsxs)(n.p,{children:["\u65e5\u5fd7\u8f93\u51fa\u7b49\u7ea7\uff0c\u652f\u6301 ",(0,d.jsx)(n.code,{children:"DEBUG"})," ",(0,d.jsx)(n.code,{children:"INFO"})," ",(0,d.jsx)(n.code,{children:"WARNING"})," ",(0,d.jsx)(n.code,{children:"ERROR"})," \u56db\u79cd\u7b49\u7ea7\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"WARNING"})]}),"\n",(0,d.jsx)(n.h4,{id:"concurrency",children:"concurrency"}),"\n",(0,d.jsxs)(n.p,{children:["\u6700\u5927\u5e76\u53d1\u4efb\u52a1\u6570\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"50"}),"\uff0c\u9700\u6839\u636e\u670d\u52a1\u5668\u6027\u80fd\u8fdb\u884c\u8c03\u6574\uff0c\u8fc7\u4f4e\u4f1a\u5bfc\u81f4\u4efb\u52a1\u5806\u79ef\uff0c\u8fc7\u9ad8\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u8fc7\u8f7d"]}),"\n",(0,d.jsx)(n.p,{children:"\u8be5\u503c\u5e76\u975e\u4e3b\u7a0b\u6700\u5927 Goroutine \u6570\uff0c\u5b9e\u9645 Goroutine \u6570\u53ef\u80fd\u4f1a\u5927\u4e8e\u8be5\u503c"}),"\n",(0,d.jsx)(n.h3,{id:"gin",children:"gin"}),"\n",(0,d.jsx)(n.h4,{id:"mode",children:"mode"}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd0\u884c\u6a21\u5f0f\uff0c\u652f\u6301 ",(0,d.jsx)(n.code,{children:"debug"})," ",(0,d.jsx)(n.code,{children:"release"})," ",(0,d.jsx)(n.code,{children:"test"})," \u4e09\u79cd\u6a21\u5f0f\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"release"}),"\uff0c\u5f71\u54cd\u65e5\u5fd7\u8f93\u51fa\u7b49\u7ea7"]}),"\n",(0,d.jsx)(n.h4,{id:"host",children:"host"}),"\n",(0,d.jsx)(n.p,{children:"\u76d1\u542c\u5730\u5740"}),"\n",(0,d.jsx)(n.h4,{id:"port",children:"port"}),"\n",(0,d.jsx)(n.p,{children:"\u76d1\u542c\u7aef\u53e3"}),"\n",(0,d.jsx)(n.h4,{id:"proxies",children:"proxies"}),"\n",(0,d.jsxs)(n.p,{children:["\u53ef\u4fe1\u4ee3\u7406\u670d\u52a1\u5668\u5217\u8868\uff0c\u652f\u6301 CIDR \u683c\u5f0f\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"[]"}),"\uff0c\u82e5\u90e8\u7f72\u5728\u53cd\u5411\u4ee3\u7406\u540e\u9762\uff0c\u9700\u914d\u7f6e\u8be5\u5b57\u6bb5\uff0c\u5426\u5219\u65e0\u6cd5\u83b7\u53d6\u771f\u5b9e\u5ba2\u6237\u7aef IP \u5730\u5740"]}),"\n",(0,d.jsx)(n.h4,{id:"upload",children:"upload"}),"\n",(0,d.jsx)(n.p,{children:"\u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h5,{id:"max",children:"max"}),"\n",(0,d.jsxs)(n.p,{children:["\u5355\u6b21\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u5355\u4f4d ",(0,d.jsx)(n.code,{children:"MiB"}),"\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"8"})]}),"\n",(0,d.jsx)(n.h4,{id:"rate",children:"rate"}),"\n",(0,d.jsx)(n.p,{children:"\u8bf7\u6c42\u901f\u7387\u9650\u5236\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h5,{id:"global",children:"global"}),"\n",(0,d.jsxs)(n.p,{children:["\u5168\u5c40\u8bf7\u6c42\u901f\u7387\u9650\u5236\uff0c\u5355\u4f4d ",(0,d.jsx)(n.code,{children:"req/s"}),"\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"100"}),"\uff0c\u8d85\u8fc7\u8be5\u503c\u5c06\u8fd4\u56de ",(0,d.jsx)(n.code,{children:"429"})," \u9519\u8bef"]}),"\n",(0,d.jsx)(n.p,{children:"\u90e8\u5206\u63a5\u53e3\u6709\u72ec\u7acb\u63a5\u53e3\u9650\u5236"}),"\n",(0,d.jsx)(n.h5,{id:"whitelist",children:"whitelist"}),"\n",(0,d.jsxs)(n.p,{children:["\u8bf7\u6c42\u767d\u540d\u5355\uff0c\u652f\u6301 CIDR \u683c\u5f0f\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:'["::1", "127.0.0.1"]'}),"\uff0c\u767d\u540d\u5355\u5185\u7684\u8bf7\u6c42\u4e0d\u53d7\u901f\u7387\u9650\u5236"]}),"\n",(0,d.jsx)(n.h4,{id:"log-1",children:"log"}),"\n",(0,d.jsx)(n.p,{children:"\u8bf7\u6c42\u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h5,{id:"whitelist-1",children:"whitelist"}),"\n",(0,d.jsxs)(n.p,{children:["\u8bf7\u6c42\u65e5\u5fd7\u767d\u540d\u5355\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:'["/metrics"]'}),"\uff0c\u767d\u540d\u5355\u5185\u7684\u8bf7\u6c42\u4e0d\u8bb0\u5f55\u65e5\u5fd7\uff0c\u4e3b\u8981\u7528\u4e8e\u6392\u9664\u76d1\u63a7\u8bf7\u6c42"]}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u652f\u6301\u524d\u7f00\u5339\u914d\uff0c\u987b\u4e3a\u5b8c\u6574\u8def\u5f84\uff0c\u5bf9\u90e8\u5206\u643a\u5e26 URI \u7684\u8def\u5f84\u987b\u4e0e",(0,d.jsx)(n.a,{href:"https://github.com/0RAYS/CBCTF/blob/main/internal/router/router.go",children:"\u6e90\u4ee3\u7801"}),"\u5339\u914d"]}),"\n",(0,d.jsx)(n.h3,{id:"gorm",children:"gorm"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"mysql",children:"mysql"}),"\n",(0,d.jsx)(n.p,{children:"MySQL \u6570\u636e\u5e93\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h5,{id:"host-1",children:"host"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u5730\u5740"}),"\n",(0,d.jsx)(n.h5,{id:"port-1",children:"port"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u7aef\u53e3"}),"\n",(0,d.jsx)(n.h5,{id:"user",children:"user"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u7528\u6237\u540d"}),"\n",(0,d.jsx)(n.h5,{id:"pwd",children:"pwd"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u5bc6\u7801"}),"\n",(0,d.jsx)(n.h5,{id:"db",children:"db"}),"\n",(0,d.jsx)(n.p,{children:"\u6570\u636e\u5e93\u540d\u79f0"}),"\n",(0,d.jsx)(n.h5,{id:"mxopen",children:"mxopen"}),"\n",(0,d.jsxs)(n.p,{children:["\u6570\u636e\u5e93\u6700\u5927\u8fde\u63a5\u6570\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"100"}),"\uff0c\u9700\u6839\u636e\u670d\u52a1\u5668\u6027\u80fd\u8fdb\u884c\u8c03\u6574"]}),"\n",(0,d.jsx)(n.h5,{id:"mxidle",children:"mxidle"}),"\n",(0,d.jsxs)(n.p,{children:["\u6570\u636e\u5e93\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u6570\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"10"}),"\uff0c\u9700\u6839\u636e\u670d\u52a1\u5668\u6027\u80fd\u8fdb\u884c\u8c03\u6574"]}),"\n",(0,d.jsx)(n.h4,{id:"log-2",children:"log"}),"\n",(0,d.jsx)(n.p,{children:"Gorm \u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"level-2",children:"level"}),"\n",(0,d.jsxs)(n.p,{children:["\u65e5\u5fd7\u8f93\u51fa\u7b49\u7ea7\uff0c\u652f\u6301 ",(0,d.jsx)(n.code,{children:"INFO"})," ",(0,d.jsx)(n.code,{children:"WARNING"})," ",(0,d.jsx)(n.code,{children:"ERROR"})," ",(0,d.jsx)(n.code,{children:"SILENT"})," \u56db\u79cd\u7b49\u7ea7\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"SILENT"})]}),"\n",(0,d.jsx)(n.h3,{id:"redis",children:"redis"}),"\n",(0,d.jsx)(n.p,{children:"Redis \u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"host-2",children:"host"}),"\n",(0,d.jsx)(n.p,{children:"Redis \u5730\u5740"}),"\n",(0,d.jsx)(n.h4,{id:"port-2",children:"port"}),"\n",(0,d.jsx)(n.p,{children:"Redis \u7aef\u53e3"}),"\n",(0,d.jsx)(n.h4,{id:"pwd-1",children:"pwd"}),"\n",(0,d.jsx)(n.p,{children:"Redis \u5bc6\u7801"}),"\n",(0,d.jsx)(n.h3,{id:"k8s",children:"k8s"}),"\n",(0,d.jsx)(n.p,{children:"Kubernetes \u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"config",children:"config"}),"\n",(0,d.jsx)(n.p,{children:"Kubeconfig \u6587\u4ef6\u8def\u5f84"}),"\n",(0,d.jsx)(n.h4,{id:"namespace",children:"namespace"}),"\n",(0,d.jsxs)(n.p,{children:["Kubernetes \u547d\u540d\u7a7a\u95f4\uff0c\u540c\u65f6\u4f5c\u4e3a\u90e8\u5206\u8d44\u6e90\u540d\u79f0\u524d\u7f00\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"cbctf"})]}),"\n",(0,d.jsx)(n.h4,{id:"tcpdump",children:"tcpdump"}),"\n",(0,d.jsxs)(n.p,{children:["\u7528\u4e8e\u7f51\u7edc\u6293\u5305\u7684 Docker \u955c\u50cf\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"nicolaka/netshoot:latest"}),"\uff0c\u53ef\u81ea\u884c\u955c\u50cf"]}),"\n",(0,d.jsx)(n.h4,{id:"external_network",children:"external_network"}),"\n",(0,d.jsx)(n.p,{children:"\u5916\u90e8\u7f51\u7edc\u914d\u7f6e\uff0c\u5141\u8bb8\u9776\u673a\u8bbf\u95ee\u7684\u5916\u90e8\u7f51\u7edc\uff0c\u901a\u5e38\u4e0e\u5bbf\u4e3b\u673a\u6240\u5728\u7f51\u7edc\u76f8\u540c\uff0c\u5bbf\u4e3b\u673a\u7f51\u7edc\u73af\u5883\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"\u8282\u70b9 IP \u5730\u5740\u4e3a: 10.233.8.1\uff0c\u7f51\u5173\u5730\u5740\u4e3a 10.233.0.1\uff0c\u7f51\u5361\u540d\u79f0\u4e3a eth0\n"})}),"\n",(0,d.jsx)(n.h5,{id:"cidr",children:"cidr"}),"\n",(0,d.jsx)(n.p,{children:"\u5bbf\u4e3b\u673a\u6240\u5728\u7f51\u6bb5\uff0c\u4f8b\uff1a10.233.0.0\u300116"}),"\n",(0,d.jsx)(n.h5,{id:"gateway",children:"gateway"}),"\n",(0,d.jsx)(n.p,{children:"\u5bbf\u4e3b\u673a\u7f51\u5173\u5730\u5740\uff0c\u4f8b\uff1a10.233.0.1"}),"\n",(0,d.jsx)(n.h5,{id:"interface",children:"interface"}),"\n",(0,d.jsx)(n.p,{children:"\u5bbf\u4e3b\u673a\u7f51\u5361\u540d\u79f0\uff0c\u4f8b\uff1aeth0"}),"\n",(0,d.jsx)(n.h5,{id:"exclude_ips",children:"exclude_ips"}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u4f1a\u5206\u914d\u7ed9\u9776\u673a\u7684 IP \u5730\u5740\uff0c\u907f\u514d\u4e0e\u5bbf\u4e3b\u673a IP \u5730\u5740\u51b2\u7a81\uff0c\u4f8b\uff1a",(0,d.jsx)(n.code,{children:'["10.233.8.1", "10.233.0.1"]'})]}),"\n",(0,d.jsx)(n.h4,{id:"frpc",children:"frpc"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u76f8\u5173\u914d\u7f6e"}),"\n",(0,d.jsx)(n.h5,{id:"on",children:"on"}),"\n",(0,d.jsxs)(n.p,{children:["\u662f\u5426\u542f\u7528 FRP \u529f\u80fd\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"false"}),"\uff0c\u542f\u7528\u540e\u53ef\u901a\u8fc7 FRP \u8fdb\u884c\u9776\u673a\u7aef\u53e3\u6620\u5c04"]}),"\n",(0,d.jsx)(n.h5,{id:"frpc_image",children:"frpc_image"}),"\n",(0,d.jsxs)(n.p,{children:["FRP \u5ba2\u6237\u7aef Docker \u955c\u50cf\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"snowdreamtech/frpc:latest"}),"\uff0c\u53ef\u81ea\u884c\u955c\u50cf"]}),"\n",(0,d.jsx)(n.h5,{id:"nginx_image",children:"nginx_image"}),"\n",(0,d.jsxs)(n.p,{children:["Nginx \u53cd\u5411\u4ee3\u7406 Docker \u955c\u50cf\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"nginx:latest"}),"\uff0c\u53ef\u81ea\u884c\u955c\u50cf"]}),"\n",(0,d.jsx)(n.h5,{id:"frps",children:"frps"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u670d\u52a1\u5668\uff0c\u53ef\u914d\u7f6e\u591a\u4e2a\uff0c\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u5185\u7f51\u7a7f\u900f"}),"\n",(0,d.jsx)(n.h6,{id:"host-3",children:"host"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u670d\u52a1\u5668\u5730\u5740"}),"\n",(0,d.jsx)(n.h6,{id:"port-3",children:"port"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u670d\u52a1\u5668\u7aef\u53e3"}),"\n",(0,d.jsx)(n.h6,{id:"token",children:"token"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u670d\u52a1\u5668\u8ba4\u8bc1 Token"}),"\n",(0,d.jsx)(n.h6,{id:"allowed_ports",children:"allowed_ports"}),"\n",(0,d.jsx)(n.p,{children:"FRP \u670d\u52a1\u5668\u5141\u8bb8\u6620\u5c04\u7684\u7aef\u53e3\u8303\u56f4"}),"\n",(0,d.jsx)(n.h4,{id:"generator_worker",children:"generator_worker"}),"\n",(0,d.jsxs)(n.p,{children:["\u52a8\u6001\u9644\u4ef6\u751f\u6210\u5668\u5bb9\u5668\u6570\u91cf\u500d\u7387\uff0c\u5355\u4e2a\u9898\u76ee\u5b9e\u9645\u8fd0\u884c\u7684 Pod \u6570\u91cf\u4e3a ",(0,d.jsx)(n.code,{children:"len(nodes) * generator_worker"}),"\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"2"}),"\uff0c\u9700\u6839\u636e\u96c6\u7fa4\u8282\u70b9\u6570\u91cf\u4e0e\u670d\u52a1\u5668\u6027\u80fd\u8fdb\u884c\u8c03\u6574"]}),"\n",(0,d.jsx)(n.h3,{id:"nfs",children:"nfs"}),"\n",(0,d.jsx)(n.p,{children:"NFS \u914d\u7f6e"}),"\n",(0,d.jsx)(n.h4,{id:"server",children:"server"}),"\n",(0,d.jsx)(n.p,{children:"NFS \u670d\u52a1\u5668\u5730\u5740"}),"\n",(0,d.jsx)(n.h4,{id:"path-1",children:"path"}),"\n",(0,d.jsx)(n.p,{children:"NFS \u670d\u52a1\u5668\u5171\u4eab\u8def\u5f84\uff0c\u9700\u786e\u4fdd\u8be5\u8def\u5f84\u53ef\u8bfb\u5199"}),"\n",(0,d.jsx)(n.h4,{id:"storage",children:"storage"}),"\n",(0,d.jsxs)(n.p,{children:["\u521b\u5efa\u7684 NFS PVC \u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\uff0c\u5355\u4f4d ",(0,d.jsx)(n.code,{children:"Gi"}),"\u3001",(0,d.jsx)(n.code,{children:"Mi"}),"\uff0c\u9ed8\u8ba4 ",(0,d.jsx)(n.code,{children:"10Gi"}),"\uff0c\u9700\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u8c03\u6574"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}}}]);