import{a as u,j as e,m as n,B as w,u as y,b as j,s as b,f as v,t as h}from"./index-DWnK0TXq.js";import{a as N}from"./auth-aJpIaszH.js";function _({onSubmit:i}){const[a,d]=u.useState({username:"",password:""}),[s,t]=u.useState({}),[m,p]=u.useState(!1),f=()=>{const r={};return a.username?a.username.length<3&&(r.username="Username must be at least 3 characters"):r.username="Username is required",a.password?a.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",t(r),Object.keys(r).length===0},g=async r=>{if(r.preventDefault(),!!f()){p(!0);try{await i({type:"login",data:{username:a.username,password:a.password}})}catch(o){t(l=>({...l,submit:o.message}))}finally{p(!1)}}},x=r=>{const{name:o,value:l}=r.target;d(c=>({...c,[o]:l})),s[o]&&t(c=>({...c,[o]:""}))};return e.jsxs(n.form,{onSubmit:g,className:"w-[400px] bg-black/40 backdrop-blur-[2px] border border-neutral-300 rounded-md p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},children:[e.jsxs("div",{className:"relative flex justify-center mb-8",children:[e.jsx("div",{className:"absolute -top-[3px] -right-[3px] w-[10px] h-[10px] border-t border-r border-neutral-300"}),e.jsx("div",{className:"absolute -bottom-[3px] -left-[3px] w-[10px] h-[10px] border-b border-l border-neutral-300"}),e.jsx(n.span,{className:"text-neutral-300 text-2xl font-mono tracking-wider",initial:{opacity:0},animate:{opacity:1},transition:{duration:.15},children:"ADMIN LOGIN"})]}),e.jsxs(n.div,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"username",value:a.username,onChange:x,placeholder:"Username",className:`
                w-full h-[40px] bg-black/20 border rounded-md px-4 
                text-neutral-50 placeholder-neutral-400
                transition-all duration-200
                ${s.username?"border-red-500 focus:border-red-500 focus:shadow-[0_0_15px_rgba(239,68,68,0.3)]":"border-neutral-300 focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]"}
            `}),s.username&&e.jsx(n.span,{className:"text-red-500 text-xs mt-1 block",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.15},children:s.username})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",name:"password",value:a.password,onChange:x,placeholder:"Password",className:`
                w-full h-[40px] bg-black/20 border rounded-md px-4 
                text-neutral-50 placeholder-neutral-400
                transition-all duration-200
                ${s.password?"border-red-500 focus:border-red-500 focus:shadow-[0_0_15px_rgba(239,68,68,0.3)]":"border-neutral-300 focus:border-geek-400 focus:shadow-[0_0_15px_rgba(89,126,247,0.3)]"}
            `}),s.password&&e.jsx(n.span,{className:"text-red-500 text-xs mt-1 block",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.15},children:s.password})]}),s.submit&&e.jsx(n.div,{className:"text-red-500 text-sm text-center",initial:{opacity:0},animate:{opacity:1},children:s.submit}),e.jsx(w,{type:"submit",variant:"primary",fullWidth:!0,className:"shadow-[0_0_20px_rgba(89,126,247,0.4)]",disabled:m,children:m?"PROCESSING...":"LOGIN"})]})]})}function L(){const i=y(),a=j(),d=async({data:s})=>{try{a(b({effect:"adminLogin",loading:!0})),(await N({name:s.username,password:s.password})).code===200&&(await a(v(!0)),h.success({description:"登陆成功"}),i("/admin/dashboard"))}catch(t){console.error("登陆失败:",t.message),h.danger({title:"登陆失败",description:t.message})}finally{a(b({effect:"adminLogin",loading:!1}))}};return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-190px)]",children:e.jsx(_,{onSubmit:d})})}export{L as default};
