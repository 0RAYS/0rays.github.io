import{c as w,a as f,j as e,L as S,m as g,B as C}from"./index-CGfkfi28.js";import{S as T}from"./ScrollingText-B2U2Q_wK.js";import{E as $}from"./index-CKdG0TQW.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]],F=w("outline","chart-line","ChartLine",E);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]],B=w("outline","list","List",L);function R({teams:o=[],challenges:y=[],totalCount:x=0,currentPage:c=1,pageSize:m=10,onPageChange:b,isAdmin:u=!1,PaginationComponent:d,loading:j=!1}){const[v,r]=f.useState(null),s=y.reduce((t,l)=>(t[l.category]||(t[l.category]=[]),t[l.category].push(l),t),{}),n=(t,l)=>{var h;const i=(h=t.challenges)==null?void 0:h.find(p=>p.id===l);return i?i.solved>0:!1},a=t=>(c-1)*m+t+1;return j?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(S,{})}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsx("div",{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",style:{minWidth:"600px",tableLayout:"fixed"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-black/50",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-black/50 p-3 text-center text-neutral-400 font-mono text-sm border-r border-neutral-300/30",style:{width:"60px"},children:"RANK"}),e.jsx("th",{className:"sticky left-[60px] z-10 bg-black/50 p-3 text-center text-neutral-400 font-mono text-sm border-r border-neutral-300/30",style:{width:"240px"},children:"TEAM"}),e.jsx("th",{className:"sticky left-[160px] z-10 bg-black/50 p-3 text-center text-neutral-400 font-mono text-sm border-r border-neutral-300/30",style:{width:"80px"},children:"SCORE"}),Object.entries(s).map(([t,l])=>e.jsx("th",{className:"text-center text-neutral-400 font-mono text-sm border-r border-neutral-300/30",colSpan:l.length,children:e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3",children:[e.jsx("span",{className:"text-geek-400",children:"#"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"text-xs text-neutral-500",children:["(",l.length,")"]})]})},t))]}),e.jsxs("tr",{className:"bg-black/40 border-t border-neutral-300/30",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-black/40 p-2 border-r border-neutral-300/30",style:{width:"60px"}}),e.jsx("th",{className:"sticky left-[60px] z-10 bg-black/40 p-2 border-r border-neutral-300/30",style:{width:"100px"}}),e.jsx("th",{className:"sticky left-[160px] z-10 bg-black/40 p-2 border-r border-neutral-300/30",style:{width:"80px"}}),Object.entries(s).map(([t,l])=>l.map((i,h)=>e.jsx("th",{className:"p-3 text-center text-neutral-400 font-mono text-xs border-r border-neutral-300/30",style:{width:"80px"},title:i.name,children:e.jsx("div",{className:"whitespace-nowrap",children:i.name})},i.id)))]})]}),e.jsx("tbody",{children:o.map((t,l)=>e.jsxs(g.tr,{className:"border-t border-neutral-300/10 hover:bg-neutral-300/5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.05},children:[e.jsx("td",{className:"sticky left-0 z-10 bg-black/30 p-3 text-center text-neutral-300 font-mono border-r border-neutral-300/30",style:{width:"60px"},children:a(l)}),e.jsx("td",{className:"sticky left-[60px] z-10 bg-black/30 p-3 border-r border-neutral-300/30",style:{width:"100px"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg border border-neutral-300 bg-neutral-700 bg-cover bg-center",style:{backgroundImage:`url(${t.avatar})`}}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(T,{text:t.name,className:"text-neutral-50 font-medium text-sm",maxWidth:240,speed:15}),e.jsxs("div",{className:"text-xs text-neutral-400",children:[t.users,"人"]})]})]})}),e.jsx("td",{className:"sticky left-[160px] z-10 bg-black/30 p-3 text-center text-neutral-50 font-mono border-r border-neutral-300/30",style:{width:"80px"},children:t.score}),Object.entries(s).map(([i,h])=>h.map(p=>{const N=n(t,p.id),k=`${t.id}-${p.id}`;return e.jsx("td",{className:"p-3 text-center border-r border-neutral-300/30",style:{width:"80px"},onMouseEnter:()=>r(k),onMouseLeave:()=>r(null),children:e.jsx("div",{className:`transition-all duration-200 ${v===k?"scale-110":""}
                              flex items-center justify-center font-mono text-lg
                            `,title:`${t.name} - ${p.name}: ${N?"已解出":"未解出"}`,children:N?e.jsx("span",{className:"text-green-500",children:"✓"}):e.jsx("span",{className:"text-neutral-600",children:"•"})})},p.id)}))]},t.id))})]})})}),d&&e.jsx("div",{className:"mt-6 flex justify-center w-full overflow-x-auto",children:u?e.jsx(d,{total:Math.ceil(x/m),current:c,pageSize:m,onChange:b,showTotal:u,totalItems:x}):e.jsx(d,{currentPage:c,totalPages:Math.ceil(x/m),onPageChange:b,showTotal:!0,totalItems:x})})]})}function _({timelineData:o=[]}){const[y,x]=f.useState([]),[c,m]=f.useState([]);f.useEffect(()=>{if(!o||o.length===0){x([]);return}const r=new Set;o.forEach(a=>{a.timeline.forEach(t=>{r.add(t.time)})});const n=Array.from(r).sort().map(a=>{const t={time:a};return o.forEach(l=>{const i=l.timeline.filter(h=>h.time<=a).sort((h,p)=>new Date(p.time)-new Date(h.time))[0];t[`team_${l.id}`]=i?i.score:0}),t});x(n),m(o.map(a=>a.id))},[o]);const b=r=>new Date(r).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=r=>r.toLocaleString(),d=r=>{const s=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"];return s[r%s.length]},j=()=>{if(!y.length)return{};const r=y.map(n=>b(n.time)),s=[];return o.forEach((n,a)=>{c.includes(n.id)&&s.push({name:`#${n.rank} ${n.name}`,type:"line",data:y.map(t=>t[`team_${n.id}`]),smooth:!0,lineStyle:{color:d(a),width:2},itemStyle:{color:d(a)},symbol:"circle",symbolSize:4,emphasis:{itemStyle:{color:d(a),borderColor:d(a),borderWidth:2,symbolSize:6}}})}),{grid:{left:"3%",right:"4%",bottom:"8%",top:"5%",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.9)",borderColor:"rgba(255, 255, 255, 0.3)",borderWidth:1,borderRadius:8,textStyle:{color:"#fff",fontSize:12},formatter:function(n){let a=`<div style="margin-bottom: 8px; font-family: monospace; color: #9CA3AF;">${n[0].axisValue}</div>`;return n.forEach(t=>{o.find(i=>`#${i.rank} ${i.name}`===t.seriesName)&&(a+=`<div style="color: ${t.color}; margin: 2px 0;">${t.seriesName}: ${u(t.value)}</div>`)}),a}},xAxis:{type:"category",data:r,axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#9CA3AF",fontSize:12}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#374151"}},axisLabel:{color:"#9CA3AF",fontSize:12,formatter:u},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:s}},v=r=>{m(s=>s.includes(r)?s.filter(n=>n!==r):[...s,r])};return!o||o.length===0?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"text-neutral-400",children:"暂无数据"})}):e.jsxs(g.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:o.map((r,s)=>e.jsxs(C,{variant:c.includes(r.id)?"primary":"ghost",size:"sm",onClick:()=>v(r.id),className:"!text-xs",style:{borderColor:c.includes(r.id)?d(s):void 0,color:c.includes(r.id)?d(s):void 0},children:["#",r.rank," ",r.name]},r.id))}),e.jsx("div",{className:"h-96",children:e.jsx($,{option:j(),style:{height:"100%",width:"100%"}})})]})}function O({totalTeams:o,totalSolves:y,highestScore:x,totalPlayers:c}){const m=[{label:"Total Teams",value:o,valueClass:"text-neutral-50"},{label:"Total Players",value:c,valueClass:"text-neutral-50"},{label:"Total Solves",value:y,valueClass:"text-geek-400"},{label:"Highest Score",value:x,valueClass:"text-yellow-400"}];return e.jsx("div",{className:"grid grid-cols-4 gap-6",children:m.map((b,u)=>e.jsxs(g.div,{className:"border border-neutral-300 rounded-md bg-black/30 backdrop-blur-[2px] p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:u*.05},children:[e.jsx("div",{className:"text-neutral-400 text-sm",children:b.label}),e.jsx(g.div,{className:`font-mono text-2xl ${b.valueClass}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:u*.05},children:b.value})]},u))})}export{B as I,R as S,F as a,O as b,_ as c};
