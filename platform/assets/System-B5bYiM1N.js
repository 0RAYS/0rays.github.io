import{c as m,j as e,m as u,L as h,a as c,t as p}from"./index-Bptx7A3S.js";import{I as j}from"./IconServer-D1VsC4j4.js";import{a as g}from"./system-BDJjxesl.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=[["path",{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878",key:"svg-0"}],["path",{d:"M12 16v5",key:"svg-1"}],["path",{d:"M16 16v4a1 1 0 0 0 1 1h4",key:"svg-2"}],["path",{d:"M8 16v4a1 1 0 0 1 -1 1h-4",key:"svg-3"}]],k=m("outline","cloud-computing","CloudComputing",f);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]],v=m("outline","database","Database",C);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]],w=m("outline","folder","Folder",I);function S({config:s,loading:i=!1}){const r=({title:a,icon:l,children:n})=>e.jsxs(u.div,{className:"border border-neutral-300/30 rounded-md bg-black/30 backdrop-blur-[2px] overflow-hidden",whileHover:{y:-2,borderColor:"rgba(89, 126, 247, 0.3)"},transition:{duration:.2},children:[e.jsx("div",{className:"p-6 border-b border-neutral-300/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{size:20,className:"text-geek-400"}),e.jsx("h2",{className:"text-lg font-mono text-neutral-50",children:a})]})}),e.jsx("div",{className:"p-6 space-y-4",children:n})]}),t=({label:a,value:l})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:a}),e.jsx("span",{className:"text-sm font-mono text-neutral-300",children:l})]}),d=({label:a,items:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:a}),e.jsx("div",{className:"space-y-1",children:l.map((n,o)=>e.jsx("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:typeof n=="string"?n:x(n)},o))})]}),x=a=>typeof a=="string"?a:typeof a=="number"?a.toString():typeof a=="boolean"?a?"是":"否":Array.isArray(a)?a.map((l,n)=>e.jsx("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:x(l)},n)):typeof a=="object"&&a!==null?Object.entries(a).map(([l,n])=>e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:[e.jsxs("span",{className:"text-neutral-400",children:[l,":"]})," ",x(n)]},l)):String(a),b=({network:a})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"CIDR:"})," ",a.cidr]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"网关:"})," ",a.gateway]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"接口:"})," ",a.interface]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"排除IP:"})," ",a.exclude_ips.join(", ")]})]}),y=({nodes:a})=>e.jsx("div",{className:"space-y-1",children:a&&a.map((l,n)=>e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:[e.jsxs("div",{children:["IP: ",l.ip]}),e.jsxs("div",{children:["公网: ",l.public?"是":"否"]})]},n))}),N=({frpc:a})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"镜像:"})," ",a.image]}),e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded",children:[e.jsx("span",{className:"text-neutral-400",children:"启用:"})," ",a.on?"是":"否"]}),a.frps&&a.frps.map((l,n)=>e.jsxs("div",{className:"text-xs font-mono text-neutral-400 bg-neutral-800/50 px-2 py-1 rounded ml-2",children:[e.jsxs("div",{children:["主机: ",l.host]}),e.jsxs("div",{children:["端口: ",l.port]}),e.jsxs("div",{children:["令牌: ",l.token]}),l.allowed_ports&&e.jsxs("div",{children:["允许端口: ",l.allowed_ports.map(o=>`${o.from}-${o.to}`).join(", ")]})]},n))]});return e.jsx("div",{className:"w-full max-w-[1200px] mx-auto",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-mono text-neutral-50",children:"系统设置"})}),i?e.jsx(h,{}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(r,{title:"基础配置",icon:j,children:[e.jsx(t,{label:"后端地址",value:s.backend}),e.jsx(t,{label:"前端地址",value:s.frontend}),e.jsx(t,{label:"数据路径",value:s.path}),e.jsx(t,{label:"日志级别",value:s.log.level}),e.jsx(t,{label:"保存日志",value:s.log.save?"是":"否"}),e.jsx(t,{label:"工作日志",value:s.asynq.level}),e.jsx(t,{label:"最大线程",value:s.asynq.concurrency})]}),e.jsxs(r,{title:"Gin配置",icon:j,children:[e.jsx(t,{label:"主机地址",value:s.gin.host}),e.jsx(t,{label:"运行模式",value:s.gin.mode}),e.jsx(t,{label:"端口",value:s.gin.port}),e.jsx(t,{label:"最大上传大小",value:`${s.gin.upload.max}MB`}),e.jsx(d,{label:"代理列表",items:s.gin.proxies}),e.jsx(d,{label:"日志白名单",items:s.gin.log.whitelist}),e.jsx(d,{label:"全局频率限制",items:s.gin.rate.global}),e.jsx(d,{label:"限流白名单",items:s.gin.rate.whitelist})]}),e.jsxs(r,{title:"数据库配置",icon:v,children:[e.jsx(t,{label:"数据库地址",value:s.gorm.mysql.host}),e.jsx(t,{label:"数据库端口",value:s.gorm.mysql.port}),e.jsx(t,{label:"数据库名称",value:s.gorm.mysql.db}),e.jsx(t,{label:"用户名",value:s.gorm.mysql.user}),e.jsx(t,{label:"最大空闲连接",value:s.gorm.mysql.mxidle}),e.jsx(t,{label:"最大打开连接",value:s.gorm.mysql.mxopen}),e.jsx(t,{label:"日志级别",value:s.gorm.log.level})]}),e.jsxs(r,{title:"Redis配置",icon:v,children:[e.jsx(t,{label:"Host",value:s.redis.host}),e.jsx(t,{label:"Port",value:s.redis.port})]}),e.jsxs(r,{title:"Kubernetes配置",icon:k,children:[e.jsx(t,{label:"配置文件",value:s.k8s.config}),e.jsx(t,{label:"命名空间",value:s.k8s.namespace}),e.jsx(t,{label:"TCPdump镜像",value:s.k8s.tcpdump}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"节点列表"}),e.jsx(y,{nodes:s.k8s.nodes})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"外部网络配置"}),e.jsx(b,{network:s.k8s.external_network})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"Frpc配置"}),e.jsx(N,{frpc:s.k8s.frpc})]})]}),e.jsxs(r,{title:"NFS配置",icon:w,children:[e.jsx(t,{label:"服务器地址",value:s.nfs.server}),e.jsx(t,{label:"存储路径",value:s.nfs.path}),e.jsx(t,{label:"存储大小",value:s.nfs.storage})]})]})]})})}function F(){const[s,i]=c.useState(null),[r,t]=c.useState(!0);c.useEffect(()=>{d()},[]);const d=async()=>{try{const x=await g();x.code===200?i(x.data):p.danger({description:x.msg||"获取系统配置失败"})}catch(x){p.danger({description:"获取系统配置失败"}),console.error(x)}finally{t(!1)}};return r?e.jsx(h,{}):s?e.jsx(S,{config:s,loading:r}):e.jsx("div",{className:"p-4 text-red-500",children:"No configuration data available"})}export{F as default};
